<div class="mis-casos-container p-4">
  <!-- Header -->
  <div class="mb-4">
    <h2 class="h4 mb-2">
      <i class="bi bi-folder2-open me-2 text-primary"></i>Mis Casos Judiciales
    </h2>
    <p class="text-muted mb-0">Consulta el estado y seguimiento de tus casos</p>
  </div>

  <!-- Estadísticas rápidas -->
  <div class="row mb-4">
    <div class="col-md-3 mb-3">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h3 class="display-6 fw-bold text-primary mb-1">{{ totalCasos }}</h3>
              <p class="text-muted mb-0 small">Casos Totales</p>
            </div>
            <i class="bi bi-folder-fill text-primary" style="font-size: 2.5rem; opacity: 0.2;"></i>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h3 class="display-6 fw-bold text-warning mb-1">{{ casosPendientes }}</h3>
              <p class="text-muted mb-0 small">Pendientes</p>
            </div>
            <i class="bi bi-clock-fill text-warning" style="font-size: 2.5rem; opacity: 0.2;"></i>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h3 class="display-6 fw-bold text-info mb-1">{{ casosEnProceso }}</h3>
              <p class="text-muted mb-0 small">En Proceso</p>
            </div>
            <i class="bi bi-arrow-repeat text-info" style="font-size: 2.5rem; opacity: 0.2;"></i>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h3 class="display-6 fw-bold text-success mb-1">{{ casosFinalizados }}</h3>
              <p class="text-muted mb-0 small">Finalizados</p>
            </div>
            <i class="bi bi-check-circle-fill text-success" style="font-size: 2.5rem; opacity: 0.2;"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Lista de casos -->
  <div class="card border-0 shadow-sm">
    <div class="card-header bg-white border-bottom">
      <h5 class="mb-0">
        <i class="bi bi-briefcase me-2"></i>Mis Casos
      </h5>
    </div>
    <div class="card-body">
      <!-- Sin casos -->
      <div *ngIf="casos.length === 0" class="text-center py-5">
        <i class="bi bi-inbox" style="font-size: 4rem; color: #6c757d; opacity: 0.3;"></i>
        <h5 class="mt-4 mb-2">No tienes casos asignados</h5>
        <p class="text-muted">
          Contacta con tu abogado para que registre tu caso en el sistema.<br>
          Una vez registrado, podrás ver aquí todo el seguimiento.
        </p>
      </div>

      <!-- Con casos -->
      <div class="row g-3" *ngIf="casos.length > 0">
        <div class="col-md-6" *ngFor="let caso of casosPaginados">
          <div class="card h-100 border-0 shadow-sm border-start" 
               [class.border-warning]="caso.nivelUrgencia === 'Próximo' || caso.nivelUrgencia === 'Urgente'"
               [class.border-danger]="caso.nivelUrgencia === 'Vencido'"
               [class.border-success]="caso.nivelUrgencia === 'Normal'"
               style="border-width: 4px !important;">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start mb-3">
                <div>
                  <h6 class="card-title mb-1 fw-bold">{{ caso.numeroCaso }}</h6>
                  <p class="text-muted small mb-0">{{ caso.tipoCaso }}</p>
                </div>
                <span class="badge" [ngClass]="getEstadoClass(caso.estado)">{{ caso.estado }}</span>
              </div>
              
              <div class="mb-3 p-2 bg-light rounded">
                <p class="card-text small mb-0" style="font-style: italic;">
                  {{ caso.opcionLlenado || 'Sin descripción disponible' }}
                </p>
              </div>
              
              <div class="row g-2 mb-3">
                <div class="col-6">
                  <div class="text-muted small">
                    <i class="bi bi-person me-1"></i>Abogado
                  </div>
                  <div class="fw-semibold">{{ caso.abogado }}</div>
                </div>
                <div class="col-6">
                  <div class="text-muted small">
                    <i class="bi bi-building me-1"></i>Dependencia
                  </div>
                  <div class="fw-semibold">{{ caso.dependencia }}</div>
                </div>
              </div>

              <div class="row g-2 mb-3">
                <div class="col-6">
                  <div class="text-muted small">
                    <i class="bi bi-calendar-event me-1"></i>Ingreso
                  </div>
                  <div>{{ caso.fechaIngreso | date:'dd/MM/yyyy' }}</div>
                </div>
                <div class="col-6">
                  <div class="text-muted small">
                    <i class="bi bi-calendar-x me-1"></i>Vencimiento
                  </div>
                  <div [ngClass]="{
                    'text-danger fw-bold': caso.diasRestantes <= 3,
                    'text-warning': caso.diasRestantes > 3 && caso.diasRestantes <= 7
                  }">
                    {{ caso.fechaVencimiento | date:'dd/MM/yyyy' }}
                    <br>
                    <small>({{ caso.diasRestantes }} días restantes)</small>
                  </div>
                </div>
              </div>
              
              <div class="d-grid">
                <button class="btn btn-outline-primary" [routerLink]="['/usuario/caso', caso.idRegistro]">
                  <i class="bi bi-eye me-2"></i>Ver Detalles
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Paginación -->
      <div class="d-flex justify-content-between align-items-center mt-4" *ngIf="casos.length > itemsPerPage">
        <div class="text-muted">
          Mostrando {{ (currentPage - 1) * itemsPerPage + 1 }} - 
          {{ Math.min(currentPage * itemsPerPage, casos.length) }} de {{ casos.length }} casos
        </div>
        <nav>
          <ul class="pagination mb-0">
            <li class="page-item" [class.disabled]="currentPage === 1">
              <button type="button" class="page-link" (click)="cambiarPagina(currentPage - 1)">
                <i class="bi bi-chevron-left"></i>
              </button>
            </li>
            <li class="page-item" *ngFor="let p of paginasArray" [class.active]="p === currentPage">
              <button type="button" class="page-link" (click)="cambiarPagina(p)">{{ p }}</button>
            </li>
            <li class="page-item" [class.disabled]="currentPage === totalPages">
              <button type="button" class="page-link" (click)="cambiarPagina(currentPage + 1)">
                <i class="bi bi-chevron-right"></i>
              </button>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>
