<div class="mis-casos-container p-4">
  <!-- Header Simple -->
  <div class="mb-4 text-center">
    <h2 class="h3 mb-3">
      <i class="bi bi-folder2-open me-2 text-primary"></i>Seguimiento de Mi Caso
    </h2>
    <p class="text-muted">Consulta el estado de tu caso judicial</p>
  </div>

  <!-- Sin casos -->
  <div *ngIf="casos.length === 0" class="text-center py-5">
    <i class="bi bi-inbox" style="font-size: 5rem; color: #6c757d; opacity: 0.3;"></i>
    <h4 class="mt-4 mb-2">No tienes casos asignados</h4>
    <p class="text-muted">
      Contacta con tu abogado para que registre tu caso.<br>
      Podrás ver el seguimiento completo aquí.
    </p>
  </div>

  <!-- Con casos -->
  <div *ngIf="casos.length > 0">
    <!-- Tarjeta de Caso Principal -->
    <div class="row justify-content-center" *ngFor="let caso of casos; trackBy: trackByCaso">
      <div class="col-lg-8 mb-4">
        <div class="card border-0 shadow-lg">
          <!-- Header del Caso -->
          <div class="card-header bg-primary text-white py-3">
            <div class="d-flex justify-content-between align-items-center">
              <div>
                <h4 class="mb-1">{{ caso.numeroCaso }}</h4>
                <p class="mb-0 small opacity-75">{{ caso.tipoCaso }}</p>
              </div>
              <span class="badge" [ngClass]="getEstadoClass(caso.estado)" style="font-size: 1rem; padding: 0.5rem 1rem;">
                {{ caso.estado }}
              </span>
            </div>
          </div>

          <!-- Cuerpo del Caso -->
          <div class="card-body p-4">
            <!-- Descripción -->
            <div class="mb-4 p-3 bg-light rounded">
              <h6 class="text-muted mb-2">
                <i class="bi bi-file-text me-2"></i>Descripción del Caso
              </h6>
              <p class="mb-0">{{ caso.opcionLlenado || 'Sin descripción disponible' }}</p>
            </div>

            <!-- Información Principal -->
            <div class="row mb-4">
              <div class="col-md-6 mb-3">
                <div class="d-flex align-items-start">
                  <i class="bi bi-person-badge text-primary me-3" style="font-size: 1.5rem;"></i>
                  <div>
                    <small class="text-muted d-block">Abogado Asignado</small>
                    <strong>{{ caso.abogado }}</strong>
                  </div>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <div class="d-flex align-items-start">
                  <i class="bi bi-building text-primary me-3" style="font-size: 1.5rem;"></i>
                  <div>
                    <small class="text-muted d-block">Dependencia</small>
                    <strong>{{ caso.dependencia }}</strong>
                  </div>
                </div>
              </div>
            </div>

            <!-- Fechas Importantes -->
            <div class="row mb-4">
              <div class="col-md-6 mb-3">
                <div class="d-flex align-items-start">
                  <i class="bi bi-calendar-check text-success me-3" style="font-size: 1.5rem;"></i>
                  <div>
                    <small class="text-muted d-block">Fecha de Ingreso</small>
                    <strong>{{ caso.fechaIngreso | date:'dd/MM/yyyy' }}</strong>
                  </div>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <div class="d-flex align-items-start">
                  <i class="bi bi-calendar-x text-danger me-3" style="font-size: 1.5rem;"></i>
                  <div>
                    <small class="text-muted d-block">Fecha de Vencimiento</small>
                    <strong [ngClass]="getDiasRestantesClass(caso.diasRestantes)">
                      {{ caso.fechaVencimiento | date:'dd/MM/yyyy' }}
                    </strong>
                    <small class="d-block mt-1" [ngClass]="getDiasRestantesClass(caso.diasRestantes)">
                      <i class="bi bi-clock me-1"></i>{{ caso.diasRestantes }} días restantes
                    </small>
                  </div>
                </div>
              </div>
            </div>

            <!-- Nivel de Urgencia -->
            <div class="text-center p-3 rounded" 
                 [ngClass]="{
                   'bg-danger bg-opacity-10': caso.nivelUrgencia === 'Vencido',
                   'bg-warning bg-opacity-10': caso.nivelUrgencia === 'Urgente' || caso.nivelUrgencia === 'Próximo',
                   'bg-success bg-opacity-10': caso.nivelUrgencia === 'Normal'
                 }">
              <span class="badge" [ngClass]="getUrgenciaClass(caso.nivelUrgencia)" style="font-size: 1rem; padding: 0.5rem 1.5rem;">
                <i class="bi bi-exclamation-triangle me-2"></i>
                Nivel de Urgencia: {{ caso.nivelUrgencia }}
              </span>
            </div>

            <!-- Acción -->
            <div class="text-center mt-4">
              <button class="btn btn-primary btn-lg" [routerLink]="['/usuario/seguimiento', caso.idRegistro]">
                <i class="bi bi-eye me-2"></i>Ver Seguimiento Completo
              </button>
            </div>
          </div>

          <!-- Footer del Caso -->
          <div class="card-footer bg-light">
            <div class="row text-center small">
              <div class="col-md-4">
                <i class="bi bi-person text-muted me-1"></i>
                <small class="text-muted">Registrado por: {{ caso.usuarioRegistro }}</small>
              </div>
              <div class="col-md-4">
                <i class="bi bi-calendar-plus text-muted me-1"></i>
                <small class="text-muted">{{ caso.fechaRegistro | date:'dd/MM/yyyy HH:mm' }}</small>
              </div>
              <div class="col-md-4">
                <i class="bi bi-arrow-clockwise text-muted me-1"></i>
                <small class="text-muted">Actualizado: {{ caso.fechaActualizacion | date:'dd/MM/yyyy' }}</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
